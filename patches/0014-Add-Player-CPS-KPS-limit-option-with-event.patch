From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: LemonCaramel <admin@caramel.moe>
Date: Thu, 22 Jul 2021 16:25:36 +0900
Subject: [PATCH] Add Player CPS & KPS limit option with event


diff --git a/src/main/java/moe/caramel/daydream/event/player/PlayerCPSChangeEvent.java b/src/main/java/moe/caramel/daydream/event/player/PlayerCPSChangeEvent.java
new file mode 100644
index 0000000000000000000000000000000000000000..36c611927b9c6b6edf2ebe7323d6edc3582e3d37
--- /dev/null
+++ b/src/main/java/moe/caramel/daydream/event/player/PlayerCPSChangeEvent.java
@@ -0,0 +1,54 @@
+package moe.caramel.daydream.event.player;
+
+import org.bukkit.entity.Player;
+import org.bukkit.event.HandlerList;
+import org.bukkit.event.player.PlayerEvent;
+import org.jetbrains.annotations.NotNull;
+
+public class PlayerCPSChangeEvent extends PlayerEvent {
+
+    private static final HandlerList HANDLER_LIST = new HandlerList();
+    private final int currentCPS;
+    private final int maxCPS;
+    private final KeyBind key;
+
+    public PlayerCPSChangeEvent(@NotNull Player who, int currentCPS, int maxCPS, @NotNull KeyBind key) {
+        super(who);
+        this.currentCPS = currentCPS;
+        this.maxCPS = maxCPS;
+        this.key = key;
+    }
+
+    public int getCurrentCPS() {
+        return this.currentCPS;
+    }
+
+    public int getMaxCPS() {
+        return maxCPS;
+    }
+
+    public boolean isMaxCPS() {
+        return this.currentCPS == this.maxCPS;
+    }
+
+    @NotNull
+    public KeyBind getKey() {
+        return this.key;
+    }
+
+    @Override
+    public @NotNull HandlerList getHandlers() {
+        return HANDLER_LIST;
+    }
+
+    @NotNull
+    public static HandlerList getHandlerList() {
+        return HANDLER_LIST;
+    }
+
+    public enum KeyBind {
+        LEFT_CLICK,
+        DROP_KEY
+    }
+
+}
diff --git a/src/main/java/org/bukkit/entity/Player.java b/src/main/java/org/bukkit/entity/Player.java
index d667137301e830b761ba179dcbd0b51ee3277633..6ab3291cc0db3198179829b0d9d8fc715d48b5d5 100644
--- a/src/main/java/org/bukkit/entity/Player.java
+++ b/src/main/java/org/bukkit/entity/Player.java
@@ -2044,6 +2044,53 @@ public interface Player extends HumanEntity, Conversable, OfflinePlayer, PluginM
     Set<Player> getTrackedPlayers();
     // Paper end
 
+    // Daydream start
+    /**
+     * @param maxTick set Player's max allow flying tick
+     */
+    void setMaxAllowFlyingTick(int maxTick);
+
+    /**
+     * @param maxCPS set Player's max left click KPS
+     */
+    void setMaxLeftClickCPS(int maxCPS);
+
+    /**
+     * @param maxKPS set Player's max Drop key KPS
+     */
+    void setMaxDropKeyKPS(int maxKPS);
+
+    /**
+     * @return Return Player's current flying tick
+     */
+    int getAboveGroundTick();
+
+    /**
+     * @return Return Player's max allow flying tick
+     */
+    int getMaxAllowFlyingTick();
+
+    /**
+     * @return Return Player's max left click CPS
+     */
+    int getMaxLeftClickCPS();
+
+    /**
+     * @return Return Player's max drop key KPS
+     */
+    int getMaxDropKeyKPS();
+
+    /**
+     * @param delay set Player's swap key delay
+     */
+    void setSwapKeyDelay(int delay);
+
+    /**
+     * @return Return Player's swap key delay
+     */
+    int getSwapKeyDelay();
+    // Daydream end
+
     // Spigot start
     public class Spigot extends Entity.Spigot {
 
